{"id":"node_modules/glsl-token-descope/index.js","dependencies":[{"name":"/Users/juan/Projects/moire-effect/package.json","includedInParent":true,"mtime":1641979595379},{"name":"/Users/juan/Projects/moire-effect/node_modules/glsl-token-descope/package.json","includedInParent":true,"mtime":1641977352904},{"name":"glsl-token-depth","loc":{"line":4,"column":10},"parent":"/Users/juan/Projects/moire-effect/node_modules/glsl-token-descope/index.js","resolved":"/Users/juan/Projects/moire-effect/node_modules/glsl-token-depth/index.js"},{"name":"glsl-token-scope","loc":{"line":5,"column":10},"parent":"/Users/juan/Projects/moire-effect/node_modules/glsl-token-descope/index.js","resolved":"/Users/juan/Projects/moire-effect/node_modules/glsl-token-scope/index.js"},{"name":"glsl-token-properties","loc":{"line":6,"column":10},"parent":"/Users/juan/Projects/moire-effect/node_modules/glsl-token-descope/index.js","resolved":"/Users/juan/Projects/moire-effect/node_modules/glsl-token-properties/index.js"},{"name":"glsl-token-assignments","loc":{"line":7,"column":10},"parent":"/Users/juan/Projects/moire-effect/node_modules/glsl-token-descope/index.js","resolved":"/Users/juan/Projects/moire-effect/node_modules/glsl-token-assignments/index.js"}],"generated":{"js":"module.exports = glslTokenDescope\n\nfunction glslTokenDescope(tokens, rename) {\n  require('glsl-token-depth')(tokens)\n  require('glsl-token-scope')(tokens)\n  require('glsl-token-properties')(tokens)\n  require('glsl-token-assignments')(tokens)\n\n  var scope   = getScope(tokens)\n  var renamer = rename || defaultRenamer()\n  var map     = {}\n\n  for (var i = 0; i < tokens.length; i++) {\n    var token = tokens[i]\n    var stack = token.stack\n    var name  = token.data\n\n    token.descoped = false\n\n    if (token.type !== 'ident') continue\n    if (token.property) continue\n    if (token.structMember) continue\n\n    var bound = false\n\n    for (var j = stack.length - 1; j >= 0; j--) {\n      var s = scope[stack[j]]\n      if (!s) continue\n      if (!s[name]) continue\n\n      bound = true\n\n      // exit if declaration not in top-level scope\n      if (j) break\n\n      token.descoped = token.data\n      token.data = map[name] = map[name] || renamer(name, token) || token.data\n    }\n\n    // Handle unbound variables, i.e. ones not defined anywhere\n    // in the shader source but still used.\n    if (!bound) {\n      token.descoped = token.data\n      token.data = map[name] = map[name] || renamer(name, token) || token.data\n    }\n  }\n\n  return tokens\n}\n\nfunction defaultRenamer() {\n  var k = 0\n\n  return function rename(name) {\n    return name + '_' + (k++).toString(36)\n  }\n}\n\nfunction getScope(tokens) {\n  var scope = {}\n\n  for (var i = 0; i < tokens.length; i++) {\n    var token = tokens[i]\n    if (token.declaration) {\n      scope[token.scope] = scope[token.scope] || {}\n      scope[token.scope][token.data] = token\n    }\n  }\n\n  return scope\n}\n"},"sourceMaps":{"js":{"mappings":[{"source":"node_modules/glsl-token-descope/index.js","original":{"line":1,"column":0},"generated":{"line":1,"column":0}},{"source":"node_modules/glsl-token-descope/index.js","original":{"line":2,"column":0},"generated":{"line":2,"column":0}},{"source":"node_modules/glsl-token-descope/index.js","original":{"line":3,"column":0},"generated":{"line":3,"column":0}},{"source":"node_modules/glsl-token-descope/index.js","original":{"line":4,"column":0},"generated":{"line":4,"column":0}},{"source":"node_modules/glsl-token-descope/index.js","original":{"line":5,"column":0},"generated":{"line":5,"column":0}},{"source":"node_modules/glsl-token-descope/index.js","original":{"line":6,"column":0},"generated":{"line":6,"column":0}},{"source":"node_modules/glsl-token-descope/index.js","original":{"line":7,"column":0},"generated":{"line":7,"column":0}},{"source":"node_modules/glsl-token-descope/index.js","original":{"line":8,"column":0},"generated":{"line":8,"column":0}},{"source":"node_modules/glsl-token-descope/index.js","original":{"line":9,"column":0},"generated":{"line":9,"column":0}},{"source":"node_modules/glsl-token-descope/index.js","original":{"line":10,"column":0},"generated":{"line":10,"column":0}},{"source":"node_modules/glsl-token-descope/index.js","original":{"line":11,"column":0},"generated":{"line":11,"column":0}},{"source":"node_modules/glsl-token-descope/index.js","original":{"line":12,"column":0},"generated":{"line":12,"column":0}},{"source":"node_modules/glsl-token-descope/index.js","original":{"line":13,"column":0},"generated":{"line":13,"column":0}},{"source":"node_modules/glsl-token-descope/index.js","original":{"line":14,"column":0},"generated":{"line":14,"column":0}},{"source":"node_modules/glsl-token-descope/index.js","original":{"line":15,"column":0},"generated":{"line":15,"column":0}},{"source":"node_modules/glsl-token-descope/index.js","original":{"line":16,"column":0},"generated":{"line":16,"column":0}},{"source":"node_modules/glsl-token-descope/index.js","original":{"line":17,"column":0},"generated":{"line":17,"column":0}},{"source":"node_modules/glsl-token-descope/index.js","original":{"line":18,"column":0},"generated":{"line":18,"column":0}},{"source":"node_modules/glsl-token-descope/index.js","original":{"line":19,"column":0},"generated":{"line":19,"column":0}},{"source":"node_modules/glsl-token-descope/index.js","original":{"line":20,"column":0},"generated":{"line":20,"column":0}},{"source":"node_modules/glsl-token-descope/index.js","original":{"line":21,"column":0},"generated":{"line":21,"column":0}},{"source":"node_modules/glsl-token-descope/index.js","original":{"line":22,"column":0},"generated":{"line":22,"column":0}},{"source":"node_modules/glsl-token-descope/index.js","original":{"line":23,"column":0},"generated":{"line":23,"column":0}},{"source":"node_modules/glsl-token-descope/index.js","original":{"line":24,"column":0},"generated":{"line":24,"column":0}},{"source":"node_modules/glsl-token-descope/index.js","original":{"line":25,"column":0},"generated":{"line":25,"column":0}},{"source":"node_modules/glsl-token-descope/index.js","original":{"line":26,"column":0},"generated":{"line":26,"column":0}},{"source":"node_modules/glsl-token-descope/index.js","original":{"line":27,"column":0},"generated":{"line":27,"column":0}},{"source":"node_modules/glsl-token-descope/index.js","original":{"line":28,"column":0},"generated":{"line":28,"column":0}},{"source":"node_modules/glsl-token-descope/index.js","original":{"line":29,"column":0},"generated":{"line":29,"column":0}},{"source":"node_modules/glsl-token-descope/index.js","original":{"line":30,"column":0},"generated":{"line":30,"column":0}},{"source":"node_modules/glsl-token-descope/index.js","original":{"line":31,"column":0},"generated":{"line":31,"column":0}},{"source":"node_modules/glsl-token-descope/index.js","original":{"line":32,"column":0},"generated":{"line":32,"column":0}},{"source":"node_modules/glsl-token-descope/index.js","original":{"line":33,"column":0},"generated":{"line":33,"column":0}},{"source":"node_modules/glsl-token-descope/index.js","original":{"line":34,"column":0},"generated":{"line":34,"column":0}},{"source":"node_modules/glsl-token-descope/index.js","original":{"line":35,"column":0},"generated":{"line":35,"column":0}},{"source":"node_modules/glsl-token-descope/index.js","original":{"line":36,"column":0},"generated":{"line":36,"column":0}},{"source":"node_modules/glsl-token-descope/index.js","original":{"line":37,"column":0},"generated":{"line":37,"column":0}},{"source":"node_modules/glsl-token-descope/index.js","original":{"line":38,"column":0},"generated":{"line":38,"column":0}},{"source":"node_modules/glsl-token-descope/index.js","original":{"line":39,"column":0},"generated":{"line":39,"column":0}},{"source":"node_modules/glsl-token-descope/index.js","original":{"line":40,"column":0},"generated":{"line":40,"column":0}},{"source":"node_modules/glsl-token-descope/index.js","original":{"line":41,"column":0},"generated":{"line":41,"column":0}},{"source":"node_modules/glsl-token-descope/index.js","original":{"line":42,"column":0},"generated":{"line":42,"column":0}},{"source":"node_modules/glsl-token-descope/index.js","original":{"line":43,"column":0},"generated":{"line":43,"column":0}},{"source":"node_modules/glsl-token-descope/index.js","original":{"line":44,"column":0},"generated":{"line":44,"column":0}},{"source":"node_modules/glsl-token-descope/index.js","original":{"line":45,"column":0},"generated":{"line":45,"column":0}},{"source":"node_modules/glsl-token-descope/index.js","original":{"line":46,"column":0},"generated":{"line":46,"column":0}},{"source":"node_modules/glsl-token-descope/index.js","original":{"line":47,"column":0},"generated":{"line":47,"column":0}},{"source":"node_modules/glsl-token-descope/index.js","original":{"line":48,"column":0},"generated":{"line":48,"column":0}},{"source":"node_modules/glsl-token-descope/index.js","original":{"line":49,"column":0},"generated":{"line":49,"column":0}},{"source":"node_modules/glsl-token-descope/index.js","original":{"line":50,"column":0},"generated":{"line":50,"column":0}},{"source":"node_modules/glsl-token-descope/index.js","original":{"line":51,"column":0},"generated":{"line":51,"column":0}},{"source":"node_modules/glsl-token-descope/index.js","original":{"line":52,"column":0},"generated":{"line":52,"column":0}},{"source":"node_modules/glsl-token-descope/index.js","original":{"line":53,"column":0},"generated":{"line":53,"column":0}},{"source":"node_modules/glsl-token-descope/index.js","original":{"line":54,"column":0},"generated":{"line":54,"column":0}},{"source":"node_modules/glsl-token-descope/index.js","original":{"line":55,"column":0},"generated":{"line":55,"column":0}},{"source":"node_modules/glsl-token-descope/index.js","original":{"line":56,"column":0},"generated":{"line":56,"column":0}},{"source":"node_modules/glsl-token-descope/index.js","original":{"line":57,"column":0},"generated":{"line":57,"column":0}},{"source":"node_modules/glsl-token-descope/index.js","original":{"line":58,"column":0},"generated":{"line":58,"column":0}},{"source":"node_modules/glsl-token-descope/index.js","original":{"line":59,"column":0},"generated":{"line":59,"column":0}},{"source":"node_modules/glsl-token-descope/index.js","original":{"line":60,"column":0},"generated":{"line":60,"column":0}},{"source":"node_modules/glsl-token-descope/index.js","original":{"line":61,"column":0},"generated":{"line":61,"column":0}},{"source":"node_modules/glsl-token-descope/index.js","original":{"line":62,"column":0},"generated":{"line":62,"column":0}},{"source":"node_modules/glsl-token-descope/index.js","original":{"line":63,"column":0},"generated":{"line":63,"column":0}},{"source":"node_modules/glsl-token-descope/index.js","original":{"line":64,"column":0},"generated":{"line":64,"column":0}},{"source":"node_modules/glsl-token-descope/index.js","original":{"line":65,"column":0},"generated":{"line":65,"column":0}},{"source":"node_modules/glsl-token-descope/index.js","original":{"line":66,"column":0},"generated":{"line":66,"column":0}},{"source":"node_modules/glsl-token-descope/index.js","original":{"line":67,"column":0},"generated":{"line":67,"column":0}},{"source":"node_modules/glsl-token-descope/index.js","original":{"line":68,"column":0},"generated":{"line":68,"column":0}},{"source":"node_modules/glsl-token-descope/index.js","original":{"line":69,"column":0},"generated":{"line":69,"column":0}},{"source":"node_modules/glsl-token-descope/index.js","original":{"line":70,"column":0},"generated":{"line":70,"column":0}},{"source":"node_modules/glsl-token-descope/index.js","original":{"line":71,"column":0},"generated":{"line":71,"column":0}},{"source":"node_modules/glsl-token-descope/index.js","original":{"line":72,"column":0},"generated":{"line":72,"column":0}}],"sources":{"node_modules/glsl-token-descope/index.js":"module.exports = glslTokenDescope\n\nfunction glslTokenDescope(tokens, rename) {\n  require('glsl-token-depth')(tokens)\n  require('glsl-token-scope')(tokens)\n  require('glsl-token-properties')(tokens)\n  require('glsl-token-assignments')(tokens)\n\n  var scope   = getScope(tokens)\n  var renamer = rename || defaultRenamer()\n  var map     = {}\n\n  for (var i = 0; i < tokens.length; i++) {\n    var token = tokens[i]\n    var stack = token.stack\n    var name  = token.data\n\n    token.descoped = false\n\n    if (token.type !== 'ident') continue\n    if (token.property) continue\n    if (token.structMember) continue\n\n    var bound = false\n\n    for (var j = stack.length - 1; j >= 0; j--) {\n      var s = scope[stack[j]]\n      if (!s) continue\n      if (!s[name]) continue\n\n      bound = true\n\n      // exit if declaration not in top-level scope\n      if (j) break\n\n      token.descoped = token.data\n      token.data = map[name] = map[name] || renamer(name, token) || token.data\n    }\n\n    // Handle unbound variables, i.e. ones not defined anywhere\n    // in the shader source but still used.\n    if (!bound) {\n      token.descoped = token.data\n      token.data = map[name] = map[name] || renamer(name, token) || token.data\n    }\n  }\n\n  return tokens\n}\n\nfunction defaultRenamer() {\n  var k = 0\n\n  return function rename(name) {\n    return name + '_' + (k++).toString(36)\n  }\n}\n\nfunction getScope(tokens) {\n  var scope = {}\n\n  for (var i = 0; i < tokens.length; i++) {\n    var token = tokens[i]\n    if (token.declaration) {\n      scope[token.scope] = scope[token.scope] || {}\n      scope[token.scope][token.data] = token\n    }\n  }\n\n  return scope\n}\n"},"lineCount":72}},"error":null,"hash":"9a0444dc8995d05bda1aa540f360b5de","cacheData":{"env":{}}}