<!DOCTYPE html>
<html>
  <head>
    <title>Moire Effect</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/dat-gui/0.5.1/dat.gui.min.js"></script>
    <script src="../../resources/p5.min.js"></script>

    <link rel="stylesheet" href="./main.css">
  </head>

  <body>
    <div class="wrapper">
      <canvas id="c"></canvas>
      <canvas id="d"></canvas>
      <h1>Moir√© effect is everywhere.</h1>
    </div>
  </body>

  <script>
    // let opts = {
    //   // rot: 3,
    //   rot: 2.8,
    //   ampl: 40,
    //   // ampl: 0,
    //   // lineWidth: 3,
    //   lineWidth: 5,
    //   // distance: 30,
    //   distance: 10,
    //   opacity: 1,
    //   animFrameCount: 20,
    // };
    // let canvas = document.getElementById("c");
    // let ctx = canvas.getContext("2d");
    // let danvas = document.getElementById("d");
    // let dtx = danvas.getContext("2d");
    // let cw = canvas.width = danvas.width = window.innerWidth, cx = cw / 2;
    // let ch = canvas.height = danvas.height = window.innerHeight, cy = ch / 2;
    // let tx = cx, ty = cy;
    // let easing = 0.05;
    // var grad = ctx.createLinearGradient(-cw/2, ch/2, cw/2, -ch/2);
    // var dgrad = dtx.createLinearGradient(-cw/2, ch/2, cw/2, -ch/2);

    function setup() {
      // frameRate(12)
      // let gui = new dat.GUI();
      // gui.add(opts, 'rot', 0, 6.28).step(0.01).onChange(draw);
      // gui.add(opts, 'ampl', 10, 100).onChange(draw);
      // gui.add(opts, 'distance', 10, 50).onChange(draw);
      // gui.add(opts, 'lineWidth', 1, 5).onChange(draw);
      // gui.add(opts, 'opacity', 0, 1).onChange(draw);
      // gui.add(opts, 'animFrameCount', 1, 100).onChange(draw);
      createCanvas(window.innerWidth, window.innerHeight, WEBGL)
      angleMode(DEGREES)
    }

    function draw() {
      background(30)
      rotateX(60)

      noFill()
      stroke(255)

      for(let i = 0; i < 20; i++) {
        let r = map(sin(frameCount / 2), -1, 1, 100, 200)
        let g = map(i, 0, 20, 100, 200)
        let b = map(cos(frameCount), -1, 1, 200, 100)

        stroke(r, g, b)

        beginShape()
        for(let j = 0; j < 360; j += 10) {
          let rad = i * 8
          let x = rad * cos()
          let y = rad * sin()
          let z = sin(frameCount * 2 * i * 10) * 50

          vertex(x, y, z)
        }
        endShape(CLOSE)
      }
    }
  </script>
</html>